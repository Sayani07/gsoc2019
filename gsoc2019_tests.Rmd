---
title: "Test solutions for R project : gravitas"
author: "Sayani Gupta"
date: "3/22/2019"
output: html_document
---


```{r setup, include=FALSE, echo=TRUE}
knitr::opts_chunk$set(echo = FALSE, message=FALSE, cache=TRUE)
# Load any R packages you need here
library(ggplot2)
library(dplyr)
library(lubridate)
library(ggplot2)
library(lvplot)
library(ggridges)
library(tsibbledata)
library(purrr)
library(tsibble)
```



_*Easy*_:

Explore the data aus_elec (Half-hourly electricity demand for five Australian states) from the package tsibbledata and create five different probability distribution plots for each month. For example, boxplot which shows median, quartile boundaries, hinges, whiskers and outliers is one of the ways to display distribution of data. 


```{r easy, echo=TRUE}

# distinct states

aus_elec %>%  distinct(State)

# time range

aus_elec %>%
          .$Time %>% range()

# Picking atate Queensland from May 2012 to Dec 2014

nsw_elec <- aus_elec %>%
            filter(State =="New South Wales") %>%
            filter(ymd_hms(Time) > "2012-05-01 19:00:00 UTC") %>%  
            mutate(data_month = lubridate::month(Time))

# Boxplot

nsw_elec %>% 
  ggplot(aes(as.factor(data_month),Demand)) +
  geom_boxplot() + 
  scale_x_discrete(breaks=seq(1,12,1))  +
  ylab("Demand in MW") +
  xlab("Months") + 
  ggtitle("Boxplot of demand for NSW")

# Ridge Plot

nsw_elec %>% 
  ggplot(aes(x = Demand,y=as.factor(data_month),group=data_month))+   geom_density_ridges2() +
  xlab("Demand in MW") +
  ylab("Months") + 
  ggtitle("Ridge plot of demand for NSW")

# Violin Plot 

nsw_elec %>% 
  ggplot(aes(as.factor(data_month), Demand)) +
  geom_violin(alpha = 0.03) +
  ylab("Demand in MW") +
  xlab("Months")  +
  ggtitle("Violin plot of demand for NSW")

# Decile Plot

nsw_decile <- nsw_elec %>% 
  group_by(data_month) %>%
  do({x <- .$Demand
  map_dfr(.x = seq(0.1,0.9,0.1),
          .f = ~ tibble(Quantile = .x,
                            Value = quantile(x, probs = .x,na.rm=TRUE)))
  })
  

p1 <- nsw_decile %>% 
  ggplot(aes(x=data_month,y=Value,col=as.factor(Quantile))) +        geom_line() +
  ylab("Demand in MW") +
  xlab("Months") +
  ggtitle("Decile plot of demand for NSW") 

p1


# Letter value plot

ggplot(nsw_elec, aes(as.factor(data_month), Demand)) + 
  geom_lv(aes(fill=..LV..),outlier.colour = "red",outlier.shape =    1, k=9) + 
  scale_fill_brewer() + 
  ylab("Demand in MW") +
  xlab("Months") +
  ggtitle("Letter value plot of demand for NSW") 
```


_*Medium*_:

Write a summary which includes pros and cons of each of the different probability distribution plots that you have chosen.

*Boxplot* - 

Standard boxplots display a compact distributional summary with median, quartiles, hinges, whiskers and extreme outliers. These are helpful to get an idea of the distribution at a glance. for example, it can be seen from \autoref{} that median demand is maximum for June and July and then falls considerably in September and October. Also, the variation is very high in summer months (from November to January or February). 

However, it does not indicate that the number of observations used to compute median or other summary statistics are different for different months. The time horizon considered for the analysis is from May, 2012 to Dec, 2014. Hence the number of observations for the period May-December are higher compared to the period Jan - Apr. Furthermore, we do not have an idea if the ditribution for each month is multimodal.


*Ridge Plot* - 

Ridge plots are density plots all aligned to the same horizontal scale and presented with a slight overlap. 



